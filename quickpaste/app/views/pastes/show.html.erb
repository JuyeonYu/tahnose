<h1>
  <% if @paste.locked? %>
    <span class="paste-lock"><%= unlocked?(@paste) ? "üîì" : "üîí" %></span>
  <% end %>
  <% if @paste.read_once %>
    <span class="paste-read-once">‚è±Ô∏è</span>
  <% end %>
  <%= @paste.tag %> ¬∑ <%= l(@paste.created_at.in_time_zone) %>
</h1>

<hr>

<% if @paste.locked? && unlocked?(@paste) %>
  <p class="paste-lock-status">
    <% if paste_permission_via(@paste) == :owner %>
      <%= t("pastes.show.locked_via_owner") %>
    <% elsif paste_permission_via(@paste) == :password %>
      <%= t("pastes.show.locked_via_password") %>
    <% end %>
  </p>
  <hr>
<% end %>

<div
  data-controller="clipboard"
  data-clipboard-copy-label-value="<%= t("pastes.show.copy") %>"
  data-clipboard-copied-label-value="<%= t("pastes.show.copied") %>"
>
  <div class="paste-actions">
    <button type="button" data-action="clipboard#copy" data-clipboard-target="button">
      <%= t("pastes.show.copy") %>
    </button>
  </div>
  <pre data-clipboard-target="content"><%= @paste.body %></pre>
</div>

<hr>

<% if @paste.qr_image.attached? %>
  <div class="qr">
    <%= image_tag url_for(@paste.qr_image), alt: t("pastes.show.qr_alt") %>
  </div>
<% else %>
  <div class="qr qr--empty">
    <%= t("pastes.show.qr_loading") %>
  </div>
<% end %>

<p>
  <% if @manage_mode || (logged_in? && @paste.owner == current_user) %>
    <%= link_to t("pastes.show.edit"), edit_paste_path(@paste) %> |
    <%= link_to t("pastes.show.delete"), paste_path(@paste), data: { turbo_method: :delete, turbo_confirm: t("pastes.show.delete_confirm") } %> |
  <% end %>

  <%= link_to t("pastes.show.list"), pastes_path %>
</p>
