<h1>
  <% if @paste.locked? %>
    <span class="paste-lock"><%= unlocked?(@paste) ? "🔓" : "🔒" %></span>
  <% end %>
  <% if @paste.read_once %>
    <span class="paste-read-once">⏱️</span>
  <% end %>
  <%= @paste.tag %> · <%= @paste.created_at %>
</h1>

<hr>

<% if @read_once_pending %>
  <div class="read-once-warning">
    이 글은 한번만 읽을 수 있습니다. 확인을 누르면 바로 삭제됩니다.
  </div>
  <%= link_to "확인하고 읽기", paste_path(@paste, read_once_confirm: 1), class: "login-button" %>
<% else %>
  <div data-controller="clipboard">
    <div class="paste-actions">
      <button type="button" data-action="clipboard#copy" data-clipboard-target="button">
        copy
      </button>
    </div>
    <pre data-clipboard-target="content"><%= @paste.body %></pre>
  </div>
<% end %>

<hr>

<% if @paste.qr_image.attached? %>
  <div class="qr">
    <%= image_tag url_for(@paste.qr_image), alt: "QR Code" %>
  </div>
<% else %>
  <div class="qr qr--empty">
    QR 생성 중...
  </div>
<% end %>

<p>
  <% if @manage_mode || (logged_in? && @paste.owner == current_user) %>
    <%= link_to "수정", edit_paste_path(@paste) %> |
    <%= link_to "삭제", paste_path(@paste), data: { turbo_method: :delete, turbo_confirm: "진짜 삭제?" } %> |
  <% end %>

  <%= link_to "목록", pastes_path %>
</p>
