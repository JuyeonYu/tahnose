test:
  service: Disk
  root: <%= Rails.root.join("tmp/storage") %>

local:
  service: Disk
  root: <%= Rails.root.join("storage") %>

<% if Rails.env.production? %>
r2:
  service: S3
  access_key_id: <%= ENV.fetch("R2_ACCESS_KEY_ID") %>
  secret_access_key: <%= ENV.fetch("R2_SECRET_ACCESS_KEY") %>
  region: "auto"
  bucket: <%= ENV.fetch("R2_BUCKET") %>
  endpoint: <%= ENV.fetch("R2_ENDPOINT") %>
  force_path_style: true
  # R2 rejects requests that include multiple checksum headers.
  # Rails adds Content-MD5; keep SDK from adding x-amz-sdk-checksum-algorithm.
  request_checksum_calculation: "when_required"
<% end %>
  

# Remember not to checkin your GCS keyfile to a repository
# google:
#   service: GCS
#   project: your_project
#   credentials: <%= Rails.root.join("path/to/gcs.keyfile") %>
#   bucket: your_own_bucket-<%= Rails.env %>

# mirror:
#   service: Mirror
#   primary: local
#   mirrors: [ amazon, google, microsoft ]
